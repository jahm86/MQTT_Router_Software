<!DOCTYPE html>
<html>
<head>
  <title>ESP32 Configuration Interface</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="favicon.png" sizes="32x32"><!--https://www.freepik.com/-->
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="script.js"></script>
</head>
<body>
  <h1>ESP32 Configuration Manager</h1>
  <div class="content">
    <div class="card-grid">
      <div class="card">
        <form action="/wifi" method="POST">
          <p>
            <h3>WiFi</h3><hr>
            <div class="flex-container">
              <label for="ssid">SSID</label>
              <input type="text" id="ssid" name="ssid" value="%wifi:ssid%">
            </div>
            <div class="flex-container">
              <label for="wpass">Password</label>
              <input type="password" id="wpass" name="wpass" value="%wifi:wpass%">
            </div>
            <div class="flex-container">
              <label for="ip">IP Address (*)</label>
              <input type="text" id="ip" name="ip" value="%wifi:ip%">
            </div>
            <div class="flex-container">
              <label for="ip">Gateway (*)</label>
              <input type="text" id="gateway" name="gateway" value="%wifi:gateway%">
            </div>
            <div class="flex-container">
              <label for="ip">Subnet (*)</label>
              <input type="text" id="subnet" name="subnet" value="%wifi:subnet%">
            </div>
            <label>(*) Optional</label><br><br>
            <input type="submit" value="Submit">
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/mqtt" id="mqtt" method="POST" enctype="multipart/form-data">
          <p>
            <h3>MQTT</h3><hr>
            <label for="sock" id="sock">Socket type</label>
              <input type="radio" id="sockmqtt" name="sock" value="mqtt"/>mqtt
              <input type="radio" id="sockmqtts" name="sock" value="mqtts"/>mqtts
              <input type="radio" id="sockws" name="sock" value="ws"/>ws
              <input type="radio" id="sockwss" name="sock" value="wss"/>wss<br>
            <div class="flex-container">
              <label for="url">URL</label>
              <input type="text" id="url" name="url" value="%mqtt:url%">
            </div>
            <div class="flex-container">
              <label for="port">Port</label>
              <input type="number" id="port" name="port" min=0 max=65535 value=%mqtt:port%>
            </div>
            <div class="flex-container">
              <label for="user">User</label>
              <input type="text" id="user" name="user" value="%mqtt:user%">
            </div>
            <div class="flex-container">
              <label for="pass">Password</label>
              <input type="password" id="pass" name="pass" value="%mqtt:pass%">
            </div>
            <div class="flex-container">
              <label for="devid">Device ID</label>
              <input type="text" id="devid" name="devid" value="%mqtt:devid%">
            </div>
            <label for="cacert">Server TLS Certificate</label>
            <input name="cacert" accept=".crt,.der" type="file" id="cacert_input"/><br><br>
            <input type="submit" value="Submit">
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/serial" method="POST">
          <p>
            <h3>Serial Port</h3><hr>
            <div class="flex-container">
              <label for="speed">Speed</label>
              <select id="ser_speed" name="speed">
                <option value="50">50 bauds</option>
                <option value="75">75 bauds</option>
                <option value="110">110 bauds</option>
                <option value="134">134 bauds</option>
                <option value="150">150 bauds</option>
                <option value="200">200 bauds</option>
                <option value="300">300 bauds</option>
                <option value="600">600 bauds</option>
                <option value="1200">1200 bauds</option>
                <option value="1800">1800 bauds</option>
                <option value="2400">2400 bauds</option>
                <option value="4800">4800 bauds</option>
                <option value="9600" selected>9600 bauds</option>
                <option value="19200">19200 bauds</option>
                <option value="28800">28800 bauds</option>
                <option value="38400">38400 bauds</option>
                <option value="57600">57600 bauds</option>
                <option value="76800">76800 bauds</option>
                <option value="115200">115200 bauds</option>
                <option value="230400">230400 bauds</option>
                <option value="460800">460800 bauds</option>
                <option value="576000">576000 bauds</option>
                <option value="921600">921600 bauds</option>
              </select>
            </div>
            <div class="flex-container">
              <label for="bits">Data bits</label>
              <select id="ser_bits" name="bits">
                <option value="5">5 bits</option>
                <option value="6">6 bits</option>
                <option value="7">7 bits</option>
                <option value="8" selected>8 bits</option>
              </select>
            </div>
            <div class="flex-container">
              <label for="stop">Stop bits</label>
              <select id="ser_stop" name="stop">
                <option value="1" selected>1 bit</option>
                <option value="2">2 bits</option>
              </select>
            </div>
            <label for="parity" id="parity">Parity</label>
              <input type="radio" id="parityn" name="parity" value="none"/>NONE
              <input type="radio" id="paritye" name="parity" value="even"/>EVEN
              <input type="radio" id="parityo" name="parity" value="odd"/>ODD<br/><br>
            <input type="submit" value="Submit">
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/canbus" method="POST">
          <p>
            <h3>CANBUS Port</h3><hr>
            <div class="flex-container">
              <label for="baud">Baud rate</label>
              <select id="cb_baud" name="baud">
                <option value="25000">25kbps</option>
                <option value="50000">50kbps</option>
                <option value="100000" selected>100kbps</option>
                <option value="125000">125kbps</option>
                <option value="250000">250kbps</option>
                <option value="500000">500kbps</option>
                <option value="800000">800kbps</option>
                <option value="1000000">1Mbps</option>
              </select>
            </div>
            <div class="flex-container">
              <label for="f_accept">Acceptance code</label>
              <input type="text" name="f_accept" placeholder="Default is 0x0" value="%canbus:f_accept%">
            </div>
            <div class="flex-container">
              <label for="f_mask">Acceptance mask</label>
              <input type="text" name="f_mask" placeholder="Default is 0xFFFFFFFF" value="%canbus:f_mask%">
            </div>
            <label for="f_single">Single filter</label>
            <label class="switch">
              <input type="hidden" name="f_single" value="false">
              <input type="checkbox" id="cb_single" name="f_single" value="true" checked>
              <span class="slider"></span>
            </label><br>
            <input type="submit" value="Submit">
          </p>
        </form>
      </div>
      <div class="card">
        <form id="postnode">
          <p>
            <div class="container">
              <h2><code>JSON</code> Data Structure</h2>
              <input name="file" accept=".json" type="file" id="file_input" />
              <div id="message"></div>
            </div><br>
            <textarea rows="40" cols="100" id="nodearea" name="node"></textarea><br><br>
            <div id="linecol"></div><br>
            <input type="button" id="validate" value="Validate">
            <input type="button" id="prettify" value="Prettify">
            <input type="button" id="minify" value="Minify">
            <input type="submit" value="Submit">
          </p>
        </form>
      </div>
      <div class="card">
        <form action="/reset" method="POST">
          <p>
            <h3>Done!</h3>
            <input type="submit" value="Reset">
          </p>
        </form>
      </div>
    </div>
  </div>
</body>
<script>
  var paritysel="%serial:parity%";
  var socksel="%mqtt:sock%";
  var cb_baudsel = "%canbus:baud%";
  var cb_issingle = "%canbus:f_single%";
  var ser_speedsel = "%serial:speed%";
  var ser_bitssel = "%serial:bits%";
  var ser_stopsel = "%serial:stop%";
</script>
</html>